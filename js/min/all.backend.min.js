slideshow_jquery_image_gallery_backend_script=function(){var i=jQuery,e={};return e.isBackendInitialized=!1,e.init=function(){e.isBackendInitialized||(e.isBackendInitialized=!0,i(document).trigger("slideshowBackendReady"))},i(document).ready(e.init),i(window).load(e.init),e}();slideshow_jquery_image_gallery_backend_script.generalSettings=function(){var e=jQuery,i={};return i.isCurrentPage=!1,i.init=function(){"slideshow_page_general_settings"===window.pagenow&&(i.isCurrentPage=!0,i.activateUserCapabilities())},i.activateUserCapabilities=function(){e("input").change(function(i){var t,a,n,r=e(i.currentTarget),s="slideshow-jquery-image-gallery-add-slideshows",d="slideshow-jquery-image-gallery-edit-slideshows",c="slideshow-jquery-image-gallery-delete-slideshows";"checkbox"==r.attr("type").toLowerCase()&&(t=r.attr("id").split("_"),a=t.shift(),n=t.join("_"),a!==d||r.attr("checked")?(a===s||a===c)&&e("#"+d+"_"+n).attr("checked",!0):(e("#"+s+"_"+n).attr("checked",!1),e("#"+c+"_"+n).attr("checked",!1)))})},e(document).bind("slideshowBackendReady",i.init),i}();slideshow_jquery_image_gallery_backend_script.editSlideshow=function(){var e=jQuery,i={};return i.isCurrentPage=!1,i.init=function(){"slideshow"===window.pagenow&&(i.isCurrentPage=!0,i.activateSettingsVisibilityDependency())},i.activateSettingsVisibilityDependency=function(){e(".depends-on-field-value").each(function(t,n){var a=e(n),s=a.attr("class").split(" "),r=a.closest("tr");e('input[name="'+s[1]+'"]:checked').val()==s[2]?r.show():r.hide(),e('input[name="'+s[1]+'"]').change(s,function(t){var n=e("."+s[3]).closest("tr");e(t.currentTarget).val()==s[2]?i.animateElementVisibility(n,!0):i.animateElementVisibility(n,!1)})})},i.animateElementVisibility=function(i,t){var n=e(i);void 0===t&&(n.stop(!0,!0),t=!n.is(":visible")),t?(n.show().css("background-color","#c0dd52"),setTimeout(function(){n.stop(!0,!0).animate({"background-color":"transparent"},1500)},500)):n.stop(!0,!0).hide()},e(document).bind("slideshowBackendReady",i.init),i}();slideshow_jquery_image_gallery_backend_script.shortcode=function(){var e=jQuery,i={};return i.init=function(){i.activateShortcodeInserter()},i.activateShortcodeInserter=function(){e(".insertSlideshowShortcodeSlideshowInsertButton").click(function(){var i="No slideshow selected.",t="slideshow_deploy",n=parseInt(e("#insertSlideshowShortcodeSlideshowSelect").val()),a=window.slideshow_jquery_image_gallery_backend_script_shortcode;return"object"==typeof a&&("object"==typeof a.data&&void 0!==a.data.shortcode&&a.data.shortcode.length>0&&(t=a.data.shortcode),"object"==typeof a.localization&&void 0!==a.localization.undefinedSlideshow&&a.localization.undefinedSlideshow.length>0&&(i=a.localization.undefinedSlideshow)),isNaN(n)?(alert(i),!1):(send_to_editor("["+t+" id='"+n+"']"),tb_remove(),!0)}),e(".insertSlideshowShortcodeCancelButton").click(function(){return tb_remove(),!1})},e(document).bind("slideshowBackendReady",i.init),i}();slideshow_jquery_image_gallery_backend_script.generalSettings.customStyles=function(){var e=jQuery,t={};return t.init=function(){slideshow_jquery_image_gallery_backend_script.generalSettings.isCurrentPage&&t.activateNavigation()},t.activateNavigation=function(){e(".nav-tab").click(function(t){var i,n=e(t.currentTarget),a=e(".nav-tab-active");a.removeClass("nav-tab-active"),n.addClass("nav-tab-active"),e(a.attr("href").replace("#",".")).hide(),e(n.attr("href").replace("#",".")).show(),i=e("input[name=_wp_http_referer]"),i.attr("value",i.attr("value").split("#").shift()+n.attr("href"))}),e('a[href="#'+document.URL.split("#").pop()+'"]').trigger("click")},e(document).bind("slideshowBackendReady",t.init),t}();slideshow_jquery_image_gallery_backend_script.generalSettings.customStyles=function(){var e=jQuery,t={};return t.init=function(){slideshow_jquery_image_gallery_backend_script.generalSettings.isCurrentPage&&(t.activateActionButtons(),t.activateDeleteButtons())},t.activateActionButtons=function(){e(".custom-styles-tab .styles-list .style-action.style-default").click(function(i){var s,n,a,o,l,c=e(i.currentTarget),r=c.closest("li").find(".style-title").html(),d=c.closest("li").find(".style-content").html(),u=window.slideshow_jquery_image_gallery_backend_script_generalSettings,y="slideshow-jquery-image-gallery-custom-styles";"string"!=typeof d||d.length<=0||("object"==typeof u&&("object"==typeof u.localization&&void 0!==u.localization.newCustomizationPrefix&&u.localization.newCustomizationPrefix.length>0&&(r=u.localization.newCustomizationPrefix+" - "+r),"object"==typeof u.data&&void 0!==u.data.customStylesKey&&u.data.customStylesKey.length>0&&(y=u.data.customStylesKey)),s=y+"_"+(t.getHighestCustomStyleID()+1),o=e(".custom-styles-tab .custom-style-templates"),n=o.find(".style-editor").clone(),n.addClass(s),n.find(".new-custom-style-title").attr("value",r),n.find(".new-custom-style-content").html(d),n.find(".new-custom-style-title").attr("name",y+"["+s+"][title]"),n.find(".new-custom-style-content").attr("name",y+"["+s+"][style]"),e(".custom-styles-tab .style-editors").append(n),setTimeout(function(){n.fadeIn(200)},200),a=o.find(".custom-styles-list-item").clone(!0),a.removeClass("custom-styles-list-item"),a.find(".style-title").html(r),a.find(".style-action").addClass(s),a.find(".style-delete").addClass(s),l=e(".custom-styles-tab .styles-list .custom-styles-list"),l.find(".no-custom-styles-found").remove(),l.append(a))}),e(".custom-styles-tab .styles-list .style-action, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-action").click(function(t){var i=e(t.currentTarget).attr("class").split(" ")[1];void 0!==i&&(e(".custom-styles-tab .style-editors .style-editor").each(function(t,i){e(i).fadeOut(200)}),setTimeout(function(){e(".style-editor."+i).fadeIn(200)},200))})},t.activateDeleteButtons=function(){e(".custom-styles-tab .styles-list .style-delete, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-delete").click(function(t){var i=e(t.currentTarget),s=i.attr("class").split(" ")[1],n=window.slideshow_jquery_image_gallery_backend_script_generalSettings,a="Are you sure you want to delete this custom style?";void 0!==s&&("object"==typeof n&&"object"==typeof n.localization&&void 0!==n.localization.confirmDeleteMessage&&n.localization.confirmDeleteMessage.length>0&&(a=n.localization.confirmDeleteMessage),confirm(a)&&(e(".custom-styles-tab .style-editors .style-editor."+s).remove(),i.closest("li").remove()))})},t.getHighestCustomStyleID=function(){var t=0;return e(".custom-styles-tab .style-editors .style-editor").each(function(i,s){var n=parseInt(e(s).attr("class").split("_").pop());n>t&&(t=n)}),parseInt(t)},e(document).bind("slideshowBackendReady",t.init),t}();slideshow_jquery_image_gallery_backend_script.editSlideshow.slideManager=function(){var e=jQuery,t={};return t.isCurrentPage=!1,t.init=function(){slideshow_jquery_image_gallery_backend_script.editSlideshow.isCurrentPage&&t.activate()},t.activate=function(){var i=e("#slideshow-slide-inserter-popup"),s=e("#slideshow-slide-inserter-popup-background"),n=i.find("#search");t.indexSlidesOrder(),e(".sortable-slides-list").sortable({revert:!0,placeholder:"sortable-placeholder",forcePlaceholderSize:!0,stop:function(){t.indexSlidesOrder()},cancel:"input, select, p"}),e(".wp-color-picker-field").wpColorPicker(),s.height(e(document).outerHeight(!0)),i.css({top:parseInt(e(window).height()/2-i.outerHeight(!0)/2,10),left:parseInt(e(window).width()/2-i.outerWidth(!0)/2,10)}),n.focus(),t.getSearchResults(),i.find("#close").click(t.closePopup),s.click(t.closePopup),i.find("#search-submit").click(t.getSearchResults),n.keypress(function(e){13==e.which&&(e.preventDefault(),t.getSearchResults())}),e("#slideshow-insert-image-slide").click(function(){i.css({display:"block"}),s.css({display:"block"})}),e("#slideshow-insert-text-slide").click(t.insertTextSlide),e("#slideshow-insert-video-slide").click(t.insertVideoSlide),e(".slideshow-delete-slide").click(function(i){t.deleteSlide(e(i.currentTarget).closest("li"))})},t.deleteSlide=function(e){var t="Are you sure you want to delete this slide?",i=window.slideshow_jquery_image_gallery_backend_script_editSlideshow;"object"==typeof i&&"object"==typeof i.localization&&void 0!==i.localization.confirm&&i.localization.confirm.length>0&&(t=i.localization.confirm),confirm(t)&&e.remove()},t.indexSlidesOrder=function(){e.each(e(".sortable-slides-list").find("li"),function(t,i){e.each(e(i).find("input, select, textarea"),function(i,s){var n=e(s),l=n.attr("name");void 0===l||l.length<=0||(l=l.replace(/[\[\]']+/g," ").split(" "),n.attr("name",l[0]+"["+(t+1)+"]["+l[2]+"]"))})})},t.getSearchResults=function(i){var s=e("#slideshow-slide-inserter-popup"),n=s.find("#results"),l=[];i=parseInt(i),isNaN(i)&&(i=0,n.html("")),e.each(n.find(".result-table-row"),function(t,i){l.push(parseInt(e(i).attr("data-attachment-id")))}),e.post(window.ajaxurl,{action:"slideshow_slide_inserter_search_query",search:s.find("#search").attr("value"),offset:i,attachmentIDs:l},function(i){var s;n.append(i),n.find(".insert-attachment").unbind("click").click(function(i){var s=e(i.currentTarget).closest("tr");t.insertImageSlide(s.attr("data-attachment-id"),s.find(".title").text(),s.find(".description").text(),s.find(".image img").attr("src"))}),s=e(".load-more-results"),s&&s.click(function(i){var s=e(i.currentTarget),n=s.attr("data-offset");s.closest("tr").hide(),isNaN(parseInt(n))||t.getSearchResults(n)})})},t.insertImageSlide=function(i,s,n,l){var a=e(".image-slide-template").find("li").clone();a.find(".attachment").attr("src",l),a.find(".attachment").attr("title",s),a.find(".attachment").attr("alt",s),a.find(".title").attr("value",s),a.find(".description").html(n),a.find(".postId").attr("value",i),a.find(".title").attr("name","slides[0][title]"),a.find(".description").attr("name","slides[0][description]"),a.find(".url").attr("name","slides[0][url]"),a.find(".urlTarget").attr("name","slides[0][urlTarget]"),a.find(".type").attr("name","slides[0][type]"),a.find(".postId").attr("name","slides[0][postId]"),a.find(".slideshow-delete-slide").click(function(i){t.deleteSlide(e(i.currentTarget).closest("li"))}),e(".sortable-slides-list").prepend(a),t.indexSlidesOrder()},t.insertTextSlide=function(){var i=e(".text-slide-template").find("li").clone();i.find(".title").attr("name","slides[0][title]"),i.find(".description").attr("name","slides[0][description]"),i.find(".textColor").attr("name","slides[0][textColor]"),i.find(".color").attr("name","slides[0][color]"),i.find(".url").attr("name","slides[0][url]"),i.find(".urlTarget").attr("name","slides[0][urlTarget]"),i.find(".type").attr("name","slides[0][type]"),i.find(".slideshow-delete-slide").click(function(i){t.deleteSlide(e(i.currentTarget).closest("li"))}),e(".sortable-slides-list").prepend(i),t.indexSlidesOrder()},t.insertVideoSlide=function(){var i=e(".video-slide-template").find("li").clone();i.find(".videoId").attr("name","slides[0][videoId]"),i.find(".showRelatedVideos").attr("name","slides[0][showRelatedVideos]"),i.find(".type").attr("name","slides[0][type]"),i.find(".slideshow-delete-slide").click(function(i){t.deleteSlide(e(i.currentTarget).closest("li"))}),e(".sortable-slides-list").prepend(i),t.indexSlidesOrder()},t.closePopup=function(){e("#slideshow-slide-inserter-popup, #slideshow-slide-inserter-popup-background").css({display:"none"})},e(document).bind("slideshowBackendReady",t.init),t}();