slideshow_jquery_image_gallery_backend_script=function(){var e=jQuery,t={};return t.isBackendInitialized=!1,t.init=function(){t.isBackendInitialized||(t.isBackendInitialized=!0,e(document).trigger("slideshowBackendReady"))},e(document).ready(t.init),e(window).load(t.init),t}();
slideshow_jquery_image_gallery_backend_script.generalSettings=function(){var e=jQuery,t={};return t.isCurrentPage=!1,t.init=function(){"slideshow_page_general_settings"===window.pagenow&&(t.isCurrentPage=!0,t.activateUserCapabilities())},t.activateUserCapabilities=function(){e("input").change(function(t){var i,s,l,n=e(t.currentTarget),a="slideshow-jquery-image-gallery-add-slideshows",o="slideshow-jquery-image-gallery-edit-slideshows",r="slideshow-jquery-image-gallery-delete-slideshows";"checkbox"==n.attr("type").toLowerCase()&&(i=n.attr("id").split("_"),s=i.shift(),l=i.join("_"),s!==o||n.attr("checked")?(s===a||s===r)&&e("#"+o+"_"+l).attr("checked",!0):(e("#"+a+"_"+l).attr("checked",!1),e("#"+r+"_"+l).attr("checked",!1)))})},e(document).bind("slideshowBackendReady",t.init),t}();
slideshow_jquery_image_gallery_backend_script.editSlideshow=function(){var e=jQuery,t={};return t.isCurrentPage=!1,t.init=function(){"slideshow"===window.pagenow&&(t.isCurrentPage=!0,t.activateSettingsVisibilityDependency())},t.activateSettingsVisibilityDependency=function(){e(".depends-on-field-value").each(function(i,s){var l=e(s),n=l.attr("class").split(" "),a=l.closest("tr");e('input[name="'+n[1]+'"]:checked').val()==n[2]?a.show():a.hide(),e('input[name="'+n[1]+'"]').change(n,function(i){var s=e("."+n[3]).closest("tr");e(i.currentTarget).val()==n[2]?t.animateElementVisibility(s,!0):t.animateElementVisibility(s,!1)})})},t.animateElementVisibility=function(t,i){var s=e(t);void 0===i&&(s.stop(!0,!0),i=!s.is(":visible")),i?(s.stop(!0,!0).show().css("background-color","#c0dd52"),setTimeout(function(){s.stop(!0,!0).animate({"background-color":"transparent"},1500)},500)):(s.stop(!0,!0).css("background-color","#d44f6e"),setTimeout(function(){s.stop(!0,!0).hide(1500,function(){s.css("background-color","transparent")})},500))},e(document).bind("slideshowBackendReady",t.init),t}();
slideshow_jquery_image_gallery_backend_script.shortcode=function(){var e=jQuery,t={};return t.init=function(){t.activateShortcodeInserter()},t.activateShortcodeInserter=function(){e(".insertSlideshowShortcodeSlideshowInsertButton").click(function(){var t="No slideshow selected.",i="slideshow_deploy",s=parseInt(e("#insertSlideshowShortcodeSlideshowSelect").val()),l=window.slideshow_jquery_image_gallery_backend_script_shortcode;return"object"==typeof l&&("object"==typeof l.data&&void 0!==l.data.shortcode&&l.data.shortcode.length>0&&(i=l.data.shortcode),"object"==typeof l.localization&&void 0!==l.localization.undefinedSlideshow&&l.localization.undefinedSlideshow.length>0&&(t=l.localization.undefinedSlideshow)),isNaN(s)?(alert(t),!1):(send_to_editor("["+i+" id='"+s+"']"),tb_remove(),!0)}),e(".insertSlideshowShortcodeCancelButton").click(function(){return tb_remove(),!1})},e(document).bind("slideshowBackendReady",t.init),t}();
slideshow_jquery_image_gallery_backend_script.generalSettings.customStyles=function(){var e=jQuery,t={};return t.init=function(){slideshow_jquery_image_gallery_backend_script.generalSettings.isCurrentPage&&t.activateNavigation()},t.activateNavigation=function(){e(".nav-tab").click(function(t){var i,s=e(t.currentTarget),l=e(".nav-tab-active");l.removeClass("nav-tab-active"),s.addClass("nav-tab-active"),e(l.attr("href").replace("#",".")).hide(),e(s.attr("href").replace("#",".")).show(),i=e("input[name=_wp_http_referer]"),i.attr("value",i.attr("value").split("#").shift()+s.attr("href"))}),e('a[href="#'+document.URL.split("#").pop()+'"]').trigger("click")},e(document).bind("slideshowBackendReady",t.init),t}();
slideshow_jquery_image_gallery_backend_script.generalSettings.customStyles=function(){var e=jQuery,t={};return t.init=function(){slideshow_jquery_image_gallery_backend_script.generalSettings.isCurrentPage&&(t.activateActionButtons(),t.activateDeleteButtons())},t.activateActionButtons=function(){e(".custom-styles-tab .styles-list .style-action.style-default").click(function(i){var s,l,n,a,o,r=e(i.currentTarget),d=r.closest("li").find(".style-title").html(),c=r.closest("li").find(".style-content").html(),u=window.slideshow_jquery_image_gallery_backend_script_generalSettings,f="slideshow-jquery-image-gallery-custom-styles";"string"!=typeof c||c.length<=0||("object"==typeof u&&("object"==typeof u.localization&&void 0!==u.localization.newCustomizationPrefix&&u.localization.newCustomizationPrefix.length>0&&(d=u.localization.newCustomizationPrefix+" - "+d),"object"==typeof u.data&&void 0!==u.data.customStylesKey&&u.data.customStylesKey.length>0&&(f=u.data.customStylesKey)),s=f+"_"+(t.getHighestCustomStyleID()+1),a=e(".custom-styles-tab .custom-style-templates"),l=a.find(".style-editor").clone(),l.addClass(s),l.find(".new-custom-style-title").attr("value",d),l.find(".new-custom-style-content").html(c),l.find(".new-custom-style-title").attr("name",f+"["+s+"][title]"),l.find(".new-custom-style-content").attr("name",f+"["+s+"][style]"),e(".custom-styles-tab .style-editors").append(l),setTimeout(function(){l.fadeIn(200)},200),n=a.find(".custom-styles-list-item").clone(!0),n.removeClass("custom-styles-list-item"),n.find(".style-title").html(d),n.find(".style-action").addClass(s),n.find(".style-delete").addClass(s),o=e(".custom-styles-tab .styles-list .custom-styles-list"),o.find(".no-custom-styles-found").remove(),o.append(n))}),e(".custom-styles-tab .styles-list .style-action, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-action").click(function(t){var i=e(t.currentTarget).attr("class").split(" ")[1];void 0!==i&&(e(".custom-styles-tab .style-editors .style-editor").each(function(t,i){e(i).fadeOut(200)}),setTimeout(function(){e(".style-editor."+i).fadeIn(200)},200))})},t.activateDeleteButtons=function(){e(".custom-styles-tab .styles-list .style-delete, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-delete").click(function(t){var i=e(t.currentTarget),s=i.attr("class").split(" ")[1],l=window.slideshow_jquery_image_gallery_backend_script_generalSettings,n="Are you sure you want to delete this custom style?";void 0!==s&&("object"==typeof l&&"object"==typeof l.localization&&void 0!==l.localization.confirmDeleteMessage&&l.localization.confirmDeleteMessage.length>0&&(n=l.localization.confirmDeleteMessage),confirm(n)&&(e(".custom-styles-tab .style-editors .style-editor."+s).remove(),i.closest("li").remove()))})},t.getHighestCustomStyleID=function(){var t=0;return e(".custom-styles-tab .style-editors .style-editor").each(function(i,s){var l=parseInt(e(s).attr("class").split("_").pop());l>t&&(t=l)}),parseInt(t)},e(document).bind("slideshowBackendReady",t.init),t}();
slideshow_jquery_image_gallery_backend_script.editSlideshow.slideManager=function(){var e=jQuery,t={};return t.uploader=null,t.init=function(){slideshow_jquery_image_gallery_backend_script.editSlideshow.isCurrentPage&&(t.activateUploader(),t.activate())},t.activateUploader=function(){e(".slideshow-insert-image-slide").on("click",function(e){e.preventDefault();var i,s;return t.uploader?(t.uploader.open(),void 0):(s=window.slideshow_jquery_image_gallery_backend_script_editSlideshow,i="","object"==typeof s&&"object"==typeof s.localization&&void 0!==s.localization.uploaderTitle&&s.localization.uploaderTitle.length>0&&(i=s.localization.uploaderTitle),t.uploader=wp.media.frames.file_frame=wp.media({title:i,multiple:!0,library:{type:"image"}}),t.uploader.on("select",function(){var e,i,s=t.uploader.state().get("selection").toJSON();for(i in s)s.hasOwnProperty(i)&&(e=s[i],t.insertImageSlide(e.id,e.title,e.description,e.url,e.alt))}),t.uploader.open(),void 0)})},t.activate=function(){var i=e("#slideshow-slide-inserter-popup"),s=e("#slideshow-slide-inserter-popup-background"),l=i.find("#search");t.indexSlidesOrder(),e(".sortable-slides-list").sortable({revert:!0,placeholder:"sortable-placeholder",forcePlaceholderSize:!0,stop:function(){t.indexSlidesOrder()},cancel:"input, select, p"}),e(".wp-color-picker-field").wpColorPicker({width:234}),s.height(e(document).outerHeight(!0)),i.css({top:parseInt(e(window).height()/2-i.outerHeight(!0)/2,10),left:parseInt(e(window).width()/2-i.outerWidth(!0)/2,10)}),l.focus(),t.getSearchResults(),i.find("#close").click(t.closePopup),s.click(t.closePopup),i.find("#search-submit").click(t.getSearchResults),l.keypress(function(e){13==e.which&&(e.preventDefault(),t.getSearchResults())}),e("#slideshow-insert-image-slide").click(function(){i.css({display:"block"}),s.css({display:"block"})}),e("#slideshow-insert-text-slide").click(t.insertTextSlide),e("#slideshow-insert-video-slide").click(t.insertVideoSlide),e(".slideshow-delete-slide").click(function(i){t.deleteSlide(e(i.currentTarget).closest("li"))})},t.deleteSlide=function(e){var t="Are you sure you want to delete this slide?",i=window.slideshow_jquery_image_gallery_backend_script_editSlideshow;"object"==typeof i&&"object"==typeof i.localization&&void 0!==i.localization.confirm&&i.localization.confirm.length>0&&(t=i.localization.confirm),confirm(t)&&e.remove()},t.indexSlidesOrder=function(){e.each(e(".sortable-slides-list").find("li"),function(t,i){e.each(e(i).find("input, select, textarea"),function(i,s){var l=e(s),n=l.attr("name");void 0===n||n.length<=0||(n=n.replace(/[\[\]']+/g," ").split(" "),l.attr("name",n[0]+"["+(t+1)+"]["+n[2]+"]"))})})},t.getSearchResults=function(i){var s=e("#slideshow-slide-inserter-popup"),l=s.find("#results"),n=[];i=parseInt(i),isNaN(i)&&(i=0,l.html("")),e.each(l.find(".result-table-row"),function(t,i){n.push(parseInt(e(i).attr("data-attachment-id")))}),e.post(window.ajaxurl,{action:"slideshow_slide_inserter_search_query",search:s.find("#search").attr("value"),offset:i,attachmentIDs:n},function(i){var s;l.append(i),l.find(".insert-attachment").unbind("click").click(function(i){var s=e(i.currentTarget).closest("tr");t.insertImageSlide(s.attr("data-attachment-id"),s.find(".title").text(),s.find(".description").text(),s.find(".image img").attr("src"),s.find(".title").text())}),s=e(".load-more-results"),s&&s.click(function(i){var s=e(i.currentTarget),l=s.attr("data-offset");s.closest("tr").hide(),isNaN(parseInt(l))||t.getSearchResults(l)})})},t.insertImageSlide=function(i,s,l,n,a){var o=e(".image-slide-template").find("li").clone();o.find(".attachment").attr("src",n),o.find(".attachment").attr("title",s),o.find(".attachment").attr("alt",a),o.find(".title").attr("value",s),o.find(".description").html(l),o.find(".alternativeText").attr("value",a),o.find(".postId").attr("value",i),o.find(".title").attr("name","slides[0][title]"),o.find(".description").attr("name","slides[0][description]"),o.find(".url").attr("name","slides[0][url]"),o.find(".urlTarget").attr("name","slides[0][urlTarget]"),o.find(".alternativeText").attr("name","slides[0][alternativeText]"),o.find(".noFollow").attr("name","slides[0][noFollow]"),o.find(".type").attr("name","slides[0][type]"),o.find(".postId").attr("name","slides[0][postId]"),o.find(".slideshow-delete-slide").click(function(i){t.deleteSlide(e(i.currentTarget).closest("li"))}),e(".sortable-slides-list").prepend(o),t.indexSlidesOrder()},t.insertTextSlide=function(){var i=e(".text-slide-template").find("li").clone();i.find(".title").attr("name","slides[0][title]"),i.find(".description").attr("name","slides[0][description]"),i.find(".textColor").attr("name","slides[0][textColor]"),i.find(".color").attr("name","slides[0][color]"),i.find(".url").attr("name","slides[0][url]"),i.find(".urlTarget").attr("name","slides[0][urlTarget]"),i.find(".noFollow").attr("name","slides[0][noFollow]"),i.find(".type").attr("name","slides[0][type]"),i.find(".slideshow-delete-slide").click(function(i){t.deleteSlide(e(i.currentTarget).closest("li"))}),i.find(".color, .textColor").wpColorPicker(),e(".sortable-slides-list").prepend(i),t.indexSlidesOrder()},t.insertVideoSlide=function(){var i=e(".video-slide-template").find("li").clone();i.find(".videoId").attr("name","slides[0][videoId]"),i.find(".showRelatedVideos").attr("name","slides[0][showRelatedVideos]"),i.find(".type").attr("name","slides[0][type]"),i.find(".slideshow-delete-slide").click(function(i){t.deleteSlide(e(i.currentTarget).closest("li"))}),e(".sortable-slides-list").prepend(i),t.indexSlidesOrder()},t.closePopup=function(){e("#slideshow-slide-inserter-popup, #slideshow-slide-inserter-popup-background").css({display:"none"})},e(document).bind("slideshowBackendReady",t.init),t}();